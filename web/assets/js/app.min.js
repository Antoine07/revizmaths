!function(e){var a={url_site:"http://revizmaths.local"};e(document.body).on("keyup","#search",function(){var t=e(this).val(),n=e(this).data("user");t.length>3?e.post(a.url_site+"/admin/user/search",{search:t,user:n},function(a){if(a.length>2){a=e.parseJSON(a),e("#results li").remove();var t=new Array;e.each(a,function(e,a){t.push(a)});for(ind in t)e("#results ul").prepend('<li><a data-userid="'+n+'" data-moduleid="'+t[ind].id+'" class="user__commands-action-add">'+t[ind].name+"(add module)</a></li>")}else e("#results ul").html("<li>No results</li>")}):e("#results ul").html("<li>No results</li>")}),e(document.body).on("click",".user__commands-action-active",function(n){n.preventDefault();var i=e(this).data("action"),r=e(this).data("id");e.post(a.url_site+"/admin/user/command/active",{id:r,action:i},function(a){var n=t._array(a);n.pop()||"error contact administrator";if(n.length>0){e("#user__commands li").remove();var i=t._elements(n);e("#user__commands").prepend(i)}})}),e(document.body).on("click",".user__commands-action-delete",function(n){n.preventDefault();var i=e(this).data("action"),r=e(this).data("id");e.post(a.url_site+"/admin/user/command/delete",{id:r,action:i},function(a){var n=t._array(a),i=n.pop()||"error contact administrator";e("#user__commands li").remove();var r=t._elements(n);e("#user__commands").prepend(r),t._show_message(i)})}),e(document.body).on("click",".user__commands-action-add",function(n){n.preventDefault();var i=e(this).data("userid"),r=e(this).data("moduleid");e.post(a.url_site+"/admin/user/command/add",{moduleId:r,userId:i},function(e){t._render(e)})});var t={_array:function(a){a=e.parseJSON(a);var t=new Array;return e.each(a,function(e,a){t.push(a)}),t},_elements:function(e){var a="";if(e.length>0)for(ind in e){var t="is locked, click here to enabled it?";0==e[ind].active&&(t="is not locked, click here to disabled it?"),a+='<li><a class="user__commands-action-active" data-id="'+e[ind].id+'" data-action="'+t+'" data-id="'+e[ind].id+'">'+e[ind].name+" "+t+'</a>  <a data-id="'+e[ind].id+'" class="user__commands-action-delete">Or click here to delete it</a></li>'}return a},_render:function(a){var n=t._array(a),i=n.pop()||"error contact administrator";if(n.length>0){e("#user__commands li").remove();var r=t._elements(n);e("#user__commands").prepend(r)}t._show_message(i)},_show_message:function(e){this._container_message.html(""),this._container_message.hide().html(e).fadeIn().fadeOut(this._duration)},_container_message:e("#message"),_duration:1e3}}(jQuery);